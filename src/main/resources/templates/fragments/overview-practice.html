<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<body>
	
	<!-- @author Bojan Aleksic -->

	<!-- Overview practice fragment -->
	<div id="practice-lingua-fragment" th:fragment="overview" th:each="ticket : ${tickets}">
		<div class="row" style="position: relative; bottom: 20px;">
			<div class="col-md-6" style="position: relative; bottom: 15px;">
				<h3 style="color: #1898b0;">
					<span class="glyphicon glyphicon-list-alt"></span>
					<span th:text="#{overview.fragment.title}"></span>
				</h3>
			</div>
			<div class="col-md-6" style="text-align: right;">
				<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<span class="glyphicon glyphicon-flag btn-glyphicons" aria-hidden="true"></span>
					<span th:if="${session.foreignLanguage ne null}" th:text="${session.foreignLanguage}" class="tab-btn-group select-practice-lang"></span> 
				</button>
				<button type="button" id="test-next" class="btn btn-primary">
					Next
				</button>
			</div>
		</div>
		<!-- Tickets -->
		<div class="row domestic-foreign-row-overview">
			<div th:text="${ticket.textDomestic}" class="col-md-5 domestic-foreign-grid"></div>
			<div id="gradient"></div>
			<div th:text="${ticket.textForeign}" class="col-md-5 domestic-foreign-grid"></div>
		</div> <!-- Tickets end -->
		<div class="row row-footer">
			<div class="col-md-4">
				<span class="glyphicon glyphicon-user"></span>
				<span th:text="${ticket.user.firstName} + ' ' + ${ticket.user.lastName} + ' (' + ${ticket.user.username} + ')' ">User</span>
				&nbsp; &bull; &nbsp;
				<span class="glyphicon glyphicon-time"></span>
				<span th:text="${ticket.dateCreated}">Date</span>
			</div>
			<div class="col-md-4" style="text-align: center;">
				<!-- Bootstrap's Slider -->
				<div id="speed-slider">
					<input id="slider" type="text" name="speed" data-provide="slider"
						data-slider-ticks="[1, 2, 3]"
						data-slider-ticks-labels='["5s", "10s", "15s"]'
						data-slider-min="1" data-slider-max="3" data-slider-step="1"
						data-slider-value="3" data-slider-tooltip="hide" />

				</div>
				<div style="width: 230px; float: right; text-align: left;">
					<div style="width: 100px; display: inline-block">
						<small><em>5s</em></small>
					</div>
					<div style="width: 98px; display: inline-block">
						<small><em>10s</em></small>
					</div>
					<div style="display: inline-block">
						<small><em>15s</em></small>
					</div>
				</div>
			</div>
			<div style="text-align: right;" class="col-md-4">
				<a href="#" id="ticket-vote-up" data-toggle="tooltip" title="Vote up">
					<span class="glyphicon glyphicon-thumbs-up"></span>
				</a>
				<span th:text="${ticket.likes.voteValue}" id="likes-value"></span>
				&nbsp;&nbsp;
				<a href="#" id="ticket-vote-down" data-toggle="tooltip" title="Vote down">
					<span class="glyphicon glyphicon-thumbs-down"></span>
				</a>
				<span th:text="${ticket.dislikes.voteValue}" id="dislikes-value"></span>
			</div>
		</div>
		<input type="hidden" th:value="${stackSize}" id="stack-size" />
		<input type="hidden" th:value="${ticket.id}" id="ticket-id" />
		
		<!-- Import for Slider, for some reason slider doesn't work even though it is already imported in the main page -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/bootstrap-slider.min.js"></script>
		
		<!-- Import fragment for handling votes (likes/dislikes) that contain JavaScript -->
		<div th:replace="fragments/overviewVote :: overviewVote">...</div>
		
		
		
		<script>

		 	$("#test-next").click(function() {
		 		var stackSize = $("#stack-size").val();
	    		if(stackSize > 0) {
	    			$("#practice-lingua").load("fragments/overview-practice.html", function(response, status, xhr) {
		            	if(status == "error") {
		            		console.log("Error occurred");
		            	} else {
		            		console.log("success");
		            	}
		            });
	    		}
			});
		 
			$(function() {
		        $('body').tooltip({ selector: '[data-toggle="tooltip"]' });
		    });
			
		</script>
	</div>

</body>
</html>